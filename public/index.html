<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PirataPlay</title>
  <meta name="theme-color" content="#0a0a0f" />
  <link rel="manifest" href="/manifest.json" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè¥‚Äç‚ò†Ô∏è</text></svg>" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/style.css" />
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     TELA DE LOGIN
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="loginScreen" class="login-screen">
  <div class="login-bg"></div>
  <div class="login-box">
    <div class="login-logo">
      <span>üè¥‚Äç‚ò†Ô∏è</span>
      <h1>PirataPlay</h1>
      <p>Seu IPTV sem amarras</p>
    </div>
    <div id="loginError" class="alert-error hidden"></div>
    <div class="form-group">
      <label>Servidor</label>
      <input id="host" type="url" placeholder="http://servidor.com:8080" autocomplete="url" />
    </div>
    <div class="form-group">
      <label>Usu√°rio</label>
      <input id="username" placeholder="seu_usuario" autocomplete="username" />
    </div>
    <div class="form-group">
      <label>Senha</label>
      <input id="password" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" />
    </div>
    <label class="check-row">
      <input type="checkbox" id="rememberMe" /> Lembrar login
    </label>
    <button id="btnLogin" class="btn-primary full" onclick="login()">
      <span id="loginBtnText">Entrar</span>
      <span id="loginSpinner" class="spinner hidden"></span>
    </button>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     APP PRINCIPAL
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="app" class="app hidden">

  <!-- Sidebar -->
  <aside id="sidebar" class="sidebar">
    <div class="sidebar-logo">
      <span>üè¥‚Äç‚ò†Ô∏è</span>
      <strong>PirataPlay</strong>
    </div>

    <nav class="sidebar-nav">
      <button class="nav-item active" data-tab="movies" onclick="switchTab('movies')">
        <svg viewBox="0 0 24 24"><path d="M18 3v2h-2V3H8v2H6V3H4v18h2v-2h2v2h8v-2h2v2h2V3h-2zM8 17H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V7h2v2zm10 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2z" fill="currentColor"/></svg>
        Filmes
      </button>
      <button class="nav-item" data-tab="series" onclick="switchTab('series')">
        <svg viewBox="0 0 24 24"><path d="M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 14H3V5h18v12z" fill="currentColor"/></svg>
        S√©ries
      </button>
      <button class="nav-item" data-tab="live" onclick="switchTab('live')">
        <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="8" fill="none" stroke="currentColor" stroke-width="2"/><circle cx="12" cy="12" r="3" fill="currentColor"/></svg>
        Ao Vivo
      </button>
      <button class="nav-item" data-tab="favorites" onclick="switchTab('favorites')">
        <svg viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" fill="currentColor"/></svg>
        Favoritos
      </button>
    </nav>

    <div class="sidebar-footer">
      <div id="userInfo" class="user-info"></div>
      <button class="btn-logout" onclick="logout()">Sair</button>
    </div>
  </aside>

  <!-- Conte√∫do principal -->
  <div class="main-content">

    <!-- Topbar -->
    <header class="topbar">
      <button class="hamburger" id="hamburger" onclick="toggleSidebar()">
        <span></span><span></span><span></span>
      </button>
      <div class="topbar-search">
        <svg viewBox="0 0 24 24"><path d="M21 21l-4.35-4.35M17 11A6 6 0 1 1 5 11a6 6 0 0 1 12 0z" stroke="currentColor" stroke-width="2" fill="none"/></svg>
        <input id="searchInput" type="text" placeholder="Buscar..." oninput="search()" />
      </div>
      <div class="topbar-filters">
        <select id="categoryFilter" onchange="filterByCategory()" class="cat-select">
          <option value="">Todas categorias</option>
        </select>
      </div>
    </header>

    <!-- Hero -->
    <section id="hero" class="hero hidden">
      <div class="hero-grad"></div>
      <div class="hero-info">
        <div id="heroBadge" class="hero-badge"></div>
        <h2 id="heroTitle" class="hero-title"></h2>
        <p id="heroOverview" class="hero-overview"></p>
        <div class="hero-meta">
          <span id="heroRating" class="hero-rating"></span>
          <span id="heroYear" class="hero-year"></span>
        </div>
        <div class="hero-actions">
          <button id="heroPlayBtn" class="btn-primary" onclick="heroPlay()">
            ‚ñ∂ Assistir
          </button>
          <button id="heroFavBtn" class="btn-ghost" onclick="heroFav()">
            ‚òÜ Favoritar
          </button>
        </div>
      </div>
    </section>

    <!-- Se√ß√µes de conte√∫do -->
    <div class="content-area">

      <!-- Alerta de erro global -->
      <div id="globalError" class="alert-error hidden"></div>

      <!-- Loader -->
      <div id="mainLoader" class="main-loader hidden">
        <div class="loader-ring"></div>
        <p>Carregando...</p>
      </div>

      <!-- Tab: Filmes -->
      <div id="tab-movies" class="tab-content active">
        <div id="continueWatching" class="section hidden">
          <h3 class="section-title">Continuar assistindo</h3>
          <div id="continueGrid" class="card-grid"></div>
        </div>
        <div class="section">
          <h3 class="section-title">Filmes</h3>
          <div id="moviesGrid" class="card-grid"></div>
          <div id="moviesPagination" class="pagination"></div>
        </div>
      </div>

      <!-- Tab: S√©ries -->
      <div id="tab-series" class="tab-content">
        <div class="section">
          <h3 class="section-title">S√©ries</h3>
          <div id="seriesGrid" class="card-grid"></div>
        </div>
      </div>

      <!-- Tab: Ao Vivo -->
      <div id="tab-live" class="tab-content">
        <div class="section">
          <h3 class="section-title">Canais ao Vivo</h3>
          <div id="liveGrid" class="card-grid live-grid"></div>
        </div>
      </div>

      <!-- Tab: Favoritos -->
      <div id="tab-favorites" class="tab-content">
        <div class="section">
          <h3 class="section-title">Meus Favoritos</h3>
          <p id="favEmpty" class="empty-msg">Voc√™ ainda n√£o favoritou nada. Clique em ‚òÜ em qualquer card.</p>
          <div id="favGrid" class="card-grid"></div>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     MODAL DE S√âRIE (Temporadas/Eps)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="seriesModal" class="modal hidden">
  <div class="modal-backdrop" onclick="closeSeriesModal()"></div>
  <div class="modal-box">
    <button class="modal-close" onclick="closeSeriesModal()">‚úï</button>
    <div id="seriesModalContent"></div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     PLAYER MODAL
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="playerModal" class="player-modal hidden">
  <div class="player-backdrop" id="playerBackdrop"></div>
  <div class="player-container">
    <div class="player-header">
      <div class="player-meta">
        <img id="playerLogo" src="" alt="" class="player-logo" />
        <div>
          <div id="playerTitle" class="player-title">‚Äî</div>
          <div id="playerSub" class="player-sub"></div>
        </div>
      </div>
      <div class="player-controls-top">
        <button id="btnFavPlayer" class="btn-icon" title="Favoritar" onclick="toggleFavFromPlayer()">‚òÜ</button>
        <button class="btn-icon" title="Picture in Picture" onclick="pipMode()">‚ßâ</button>
        <button class="btn-icon" title="Tela cheia" onclick="fullscreenPlayer()">‚õ∂</button>
        <button class="btn-icon close-btn" onclick="closePlayer()">‚úï</button>
      </div>
    </div>

    <div class="video-wrap">
      <video id="videoPlayer" controls playsinline preload="metadata"></video>
      <div id="playerOverlay" class="player-overlay hidden">
        <div class="loader-ring"></div>
      </div>
      <div id="playerError" class="player-error hidden">
        <p>‚ö†Ô∏è Falha ao carregar o stream.</p>
        <button class="btn-primary small" onclick="retryPlay()">Tentar novamente</button>
        <button class="btn-ghost small" onclick="tryProxy()">Usar proxy</button>
      </div>
    </div>
  </div>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.7/dist/hls.min.js"></script>
<script src="/storage.js"></script>
<script src="/app.js"></script>
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/service-worker.js')
        .catch(err => console.warn('SW:', err));
    });
  }
</script>
</body>
</html>
